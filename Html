<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System</title>
    <!-- Bootstrap CSS for responsive design -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .container { max-width: 800px; margin-top: 20px; }
        table { margin-top: 20px; }
        .form-section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">Library Management System</h1>
        
        <!-- Add Book Form -->
        <div class="form-section">
            <h3>Add a New Book</h3>
            <form id="bookForm">
                <div class="mb-3">
                    <label for="bookName" class="form-label">Book Name</label>
                    <input type="text" class="form-control" id="bookName" required>
                </div>
                <div class="mb-3">
                    <label for="authorName" class="form-label">Author Name</label>
                    <input type="text" class="form-control" id="authorName" required>
                </div>
                <div class="mb-3">
                    <label for="bookType" class="form-label">Book Type</label>
                    <input type="text" class="form-control" id="bookType" required>
                </div>
                <button type="submit" class="btn btn-primary">Add Book</button>
            </form>
        </div>

        <!-- Search Form -->
        <div class="form-section">
            <h3>Search Books</h3>
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="searchInput" placeholder="Search by name or author...">
                <button class="btn btn-outline-secondary" type="button" onclick="searchBooks()">Search</button>
            </div>
        </div>

        <!-- Issue Book Form -->
        <div class="form-section">
            <h3>Issue a Book</h3>
            <form id="issueForm">
                <div class="mb-3">
                    <label for="userName" class="form-label">User Name</label>
                    <input type="text" class="form-control" id="userName" required>
                </div>
                <div class="mb-3">
                    <label for="issueBookName" class="form-label">Book Name to Issue</label>
                    <input type="text" class="form-control" id="issueBookName" required>
                </div>
                <button type="submit" class="btn btn-success">Issue Book</button>
            </form>
        </div>

        <!-- Books Table -->
        <div class="form-section">
            <h3>Library Books</h3>
            <table class="table table-striped" id="bookTable">
                <thead>
                    <tr>
                        <th>Book Name</th>
                        <th>Author</th>
                        <th>Type</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="bookList"></tbody>
            </table>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Load books from localStorage on page load
        let library = JSON.parse(localStorage.getItem('library')) || [];
        displayBooks();

        // Add Book Function
        document.getElementById('bookForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const bookName = document.getElementById('bookName').value;
            const authorName = document.getElementById('authorName').value;
            const bookType = document.getElementById('bookType').value;
            
            const newBook = { name: bookName, author: authorName, type: bookType, status: 'Available' };
            library.push(newBook);
            localStorage.setItem('library', JSON.stringify(library));
            displayBooks();
            this.reset(); // Clear form
            alert('Book added successfully!');
        });

        // Issue Book Function
        document.getElementById('issueForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const userName = document.getElementById('userName').value;
            const issueBookName = document.getElementById('issueBookName').value;
            
            const book = library.find(b => b.name.toLowerCase() === issueBookName.toLowerCase() && b.status === 'Available');
            if (book) {
                book.status = `Issued to ${userName}`;
                localStorage.setItem('library', JSON.stringify(library));
                displayBooks();
                this.reset();
                alert('Book issued successfully!');
            } else {
                alert('Book not found or already issued!');
            }
        });

        // Search Books Function
        function searchBooks() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = library.filter(b => 
                b.name.toLowerCase().includes(query) || b.author.toLowerCase().includes(query)
            );
            displayBooks(filtered);
        }

        // Display Books Function
        function displayBooks(booksToShow = library) {
            const tbody = document.getElementById('bookList');
            tbody.innerHTML = '';
            booksToShow.forEach(book => {
                const row = `<tr>
                    <td>${book.name}</td>
                    <td>${book.author}</td>
                    <td>${book.type}</td>
                    <td><span class="badge ${book.status === 'Available' ? 'bg-success' : 'bg-warning'}">${book.status}</span></td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }
    </script>
</body>
</html>
